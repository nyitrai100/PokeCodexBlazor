@page "/PokemonDetails/{id:int}"
@inject PokemonService PokemonService
@using PokeCodexBlazor

<head>
    <link rel="stylesheet" href="PokemonDetails.css">
</head>


<h3>Pokemon Details</h3>
@* <button><a href="/">Back</a></button> *@

@if (pokemon == null)
{
    <p>Loading...</p>
}
else
{
  string folderPath = @"/Users/nyitraibence/Desktop/C#projects/PokeCodexBlazor/pokemondb-resourses/pokemon";
  string gifFilePath = Path.Combine(folderPath, $"{@pokemon.Name}.gif");
    <div>
        @* <h4>@pokemon.Name</h4> *@
        @* <p>Type 1: @pokemon.Type1</p> *@
        @* <p>Type 2: @pokemon.Type2</p> *@
        @* <p>Description: @pokemon.Description</p> *@
        @* <p>Weight: @pokemon.Weight</p> *@
        @* <p>Height: @pokemon.Height</p> *@
        @* <p>Evolves: @pokemon.Evolves</p> *@
        @* <p>Mega Evolves: @pokemon.MegaEvolves</p> *@
        <div id="pokedex">
          <div id="left">
            <div id="logo"></div>
            <div id="bg_curve1_left"></div>
            <div id="bg_curve2_left"></div>
            <div id="curve1_left">
              <div id="buttonGlass">
                <div id="reflect"> </div>
              </div>
              <div id="miniButtonGlass1"></div>
              <div id="miniButtonGlass2"></div>
              <div id="miniButtonGlass3"></div>
            </div>
            <div id="curve2_left">
              <div id="junction">
                <div id="junction1"></div>
                <div id="junction2"></div>
              </div>
            </div>
            <div id="screen">
              <div id="topPicture">
                <div id="buttontopPicture1"></div>
                <div id="buttontopPicture2"></div>
              </div>
              <div id="picture">
                @* <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/200653/psykokwak.gif" alt="psykokwak" height="170" /> *@
                     @if (File.Exists(gifFilePath))
                                                  {
                                                      //convert theFilePath to url
                                                      string base64String = Convert.ToBase64String(File.ReadAllBytes(gifFilePath));
                                                      string dataUrl = $"data:image/gif;base64,{base64String}";
                                                      // Display the GIF
                                                      <div style="margin-top: 10%">
                                                        <img src="@dataUrl"  height="100px"/>
                                                      </div>
                                                        
                                                      
                                                  }
                                                  else
                                                  {
                                                      <p>@($"No GIF found for {pokemon.Name}");</p>
                                                  }
              </div>
              <div id="buttonbottomPicture"></div>
              <div id="speakers">
                <div class="sp"></div>
                <div class="sp"></div>
                <div class="sp"></div>
                <div class="sp"></div>
              </div>
            </div>
            <div id="bigbluebutton"></div>
            <div id="barbutton1"></div>
            <div id="barbutton2"></div>
            <div id="cross">
              <div id="leftcross">
                <div id="leftT"></div>
              </div>
              <div id="topcross">
                <div id="upT"></div>
              </div>
              <div id="rightcross">
                <div id="rightT"></div>
              </div>
              <div id="midcross">
                <div id="midCircle"></div>
              </div>
              <div id="botcross">
                <div id="downT"></div>
              </div>
            </div>
          </div>
          <div id="right">
            <div id="stats">
              <strong>Name:</strong> @pokemon.Name <br/>
              <strong>Type:</strong> @pokemon.Type1 <br/>
              <strong>Height:</strong> @pokemon.Height <br/>
              <strong>Weight:</strong> @pokemon.Weight <br/><br/>
              <strong>@pokemon.Description</strong><br/>
              @* <img src="images/pokemon/@(pokemon.Name).gif" alt="@pokemon.Name" height="170" /> *@
            </div>
            <div id="blueButtons1">
              <div class="blueButton"></div>
              <div class="blueButton"></div>
              <div class="blueButton"></div>
              <div class="blueButton"></div>
              <div class="blueButton"></div>
            </div>
            <div id="blueButtons2">
              <div class="blueButton"></div>
              <div class="blueButton"></div>
              <div class="blueButton"></div>
              <div class="blueButton"></div>
              <div class="blueButton"></div>
            </div>
            <div id="miniButtonGlass4"></div>
            <div id="miniButtonGlass5"></div>
            <div id="barbutton3"></div>
            <div id="barbutton4"></div>
            <div id="yellowBox1"></div>
            <div id="yellowBox2"></div>
            <div id="bg_curve1_right"></div>
            <div id="bg_curve2_right"></div>
            <div id="curve1_right"></div>
            <div id="curve2_right"></div>
          </div>
        </div>
        
        
        
    </div>
}

@code {
  [Parameter] public int Id { get; set; }

  private Pokemon pokemon;

  protected override async Task OnInitializedAsync()
  {
    var pokemons = await PokemonService.GetAllPokemonsAsync();
    pokemon = pokemons.FirstOrDefault(p => p.Id == Id);
  }


}